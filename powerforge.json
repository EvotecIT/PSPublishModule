{
  "$schema": "./Schemas/powerforge.pipelinespec.schema.json",
  "SchemaVersion": 1,
  "Build": {
    "Name": "PSPublishModule",
    "SourcePath": "Module",
    "CsprojPath": "PSPublishModule/PSPublishModule.csproj",
    "Version": "auto",
    "Configuration": "Release",
    "Frameworks": ["net8.0", "net472"],
    "ExcludeDirectories": [
      ".git",
      ".vs",
      ".vscode",
      "bin",
      "obj",
      "packages",
      "node_modules",
      "Artefacts",
      "Build",
      "Docs",
      "Documentation",
      "Examples",
      "Ignore",
      "Tests",
      "Lib"
    ],
    "ExcludeFiles": [".gitignore", "PSPublishModule.Tests.ps1"]
  },
  "Install": {
    "Enabled": true,
    "Strategy": "AutoRevision",
    "KeepVersions": 3
  },
  "Segments": [
    {
      "Type": "Documentation",
      "Configuration": { "Path": "Docs", "PathReadme": "Docs/Readme.md" }
    },
    {
      "Type": "BuildDocumentation",
      "Configuration": {
        "Enable": true,
        "StartClean": true,
        "UpdateWhenNew": true,
        "SyncExternalHelpToProjectRoot": false,
        "Tool": "PowerForge",
        "GenerateExternalHelp": true,
        "ExternalHelpCulture": "en-US"
      }
    },
    {
      "Type": "Validation",
      "Settings": {
        "Enable": true,
        "ScriptAnalyzer": { "Enable": true },
        "FileIntegrity": {
          "CheckTrailingWhitespace": true,
          "CheckSyntax": true
        }
      }
    },
    {
      "Type": "FileConsistency",
      "Settings": {
        "Enable": true,
        "RequiredEncoding": "UTF8BOM",
        "RequiredLineEnding": "CRLF",
        "Scope": "StagingAndProject",
        "ExcludeDirectories": [
          "Build",
          "Docs",
          "Documentation",
          "Examples",
          "Tests"
        ],
        "EncodingOverrides": {
          "*.xml": "UTF8"
        },
        "ExportReport": true,
        "CheckMixedLineEndings": true,
        "CheckMissingFinalNewline": true
      }
    },
    {
      "Type": "Compatibility",
      "Settings": {
        "Enable": true,
        "RequireCrossCompatibility": true,
        "MinimumCompatibilityPercentage": 95,
        "ExportReport": true
      }
    },
    { "Type": "Packed", "Configuration": { "Enabled": true, "Path": "Artefacts/Packed" } },
    { "Type": "Unpacked", "Configuration": { "Enabled": true, "Path": "Artefacts/Unpacked" } }
  ]
}
